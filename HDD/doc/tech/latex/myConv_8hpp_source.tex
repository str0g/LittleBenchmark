\hypertarget{myConv_8hpp_source}{
\section{myConv.hpp}
}


\begin{footnotesize}\begin{alltt}
00001 \textcolor{preprocessor}{#ifndef MYCONV\_HPP\_INCLUDED}
00002 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define MYCONV\_HPP\_INCLUDED}
00003 \textcolor{preprocessor}{}
00004 \textcolor{comment}{/***************************************************************}
00005 \textcolor{comment}{ * Name:      <Input name>.cpp/h}
00006 \textcolor{comment}{ * Purpose:   Code for Application <Name>}
00007 \textcolor{comment}{ * Author:    Łukasz Buśko (buskol.waw.pl@gmail.com)}
00008 \textcolor{comment}{ * Created:   <Input date>}
00009 \textcolor{comment}{ * Copyright: Łukasz Buśko (http://str0g.wordpress.com)}
00010 \textcolor{comment}{ * License:   GNU / General Public Licens}
00011 \textcolor{comment}{ **************************************************************/}
00012 
00013 \textcolor{preprocessor}{#include <string>}
00014 \textcolor{preprocessor}{#include <sstream>}
00015 \textcolor{preprocessor}{#include "Globals.h"}
00016 \textcolor{keyword}{namespace }buskol\{
00017     \textcolor{keyword}{namespace }Conv\{
00018         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{inline} std::string ToString(\textcolor{keyword}{const} T& liczba)\{
00019             std::stringstream ss;
00020             ss << liczba;
00021             \textcolor{keywordflow}{return} ss.str();
00022         \}
00023 \textcolor{preprocessor}{        #if ( \_WIN32 || \_WIN64 ) || ( \_\_WIN32\_\_ || \_\_WIN64\_\_ )}
00024 \textcolor{preprocessor}{}\textcolor{preprocessor}{            #ifdef \_MSC\_VER}
00025 \textcolor{preprocessor}{}            \textcolor{keyword}{inline} std::wstring stringTo\_wstring(\textcolor{keyword}{const} std::string& str)\{
00026                 std::wstring wstr;
00027                 wstr.assign(str.begin(),str.end());
00028                 \textcolor{keywordflow}{return} wstr;
00029             \}
00030 \textcolor{preprocessor}{            #endif}
00031 \textcolor{preprocessor}{}\textcolor{preprocessor}{        #endif}
00032 \textcolor{preprocessor}{}        \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{inline} T FromString(std::string s\_liczba)\{
00033         T liczba;
00034         std::stringstream(s\_liczba) >> liczba;
00035         \textcolor{keywordflow}{return} liczba;
00036         \}
00037         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{inline} std::string Bandwidth(\textcolor{keywordtype}{double} dTime ,\textcolor{keyword}{const} T 
      &ui64Counter,\textcolor{keyword}{const} std::string &strAppEnd = \textcolor{stringliteral}{"/s"})\{
00038             dTime == 0 ? dTime = 1 : dTime;\textcolor{comment}{// /= 1000000;}
00039             \textcolor{keywordtype}{double} dRet = 0;
00040             \textcolor{keywordflow}{if} ( ui64Counter == 0)\{
00041                 std::cerr<<myColors::ConsoleColors\_[1]<<\textcolor{stringliteral}{"Can not count bandwidth 
      from counter = 0"}<<myColors::ConsoleColors\_[*myColors::TextColor]<<std::endl;
00042                 std::cerr<<\textcolor{stringliteral}{"dTime:"}<<dTime<<\textcolor{stringliteral}{" Exp end sqc["}<<strAppEnd<<\textcolor{stringliteral}{"]"}<<std:
      :endl;
00043             \}\textcolor{keywordflow}{else}\{ dRet = ui64Counter / dTime ;\}
00044             \textcolor{keywordflow}{if} (dRet < KB )\{ \textcolor{comment}{//B}
00045                 \textcolor{keywordflow}{return} Conv::ToString(dRet)+\textcolor{stringliteral}{"B"}+strAppEnd;
00046             \}
00047             \textcolor{keywordflow}{if} ( dRet < MB )\{\textcolor{comment}{//KB}
00048                 \textcolor{keywordflow}{return} Conv::ToString(dRet/KB)+\textcolor{stringliteral}{"KB"}+strAppEnd;
00049             \}
00050             \textcolor{keywordflow}{if}( dRet < GB )\{\textcolor{comment}{//MB}
00051                 \textcolor{keywordflow}{return} Conv::ToString(dRet/MB)+\textcolor{stringliteral}{"MB"}+strAppEnd;
00052             \}
00053             \textcolor{keywordflow}{return} Conv::ToString(dRet/GB)+\textcolor{stringliteral}{"GB"}+strAppEnd;
00054         \}
00055         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{inline} T SizeFromString(std::string str)\{
00056             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} it = str.length()-2; it < str.length(); it++)\{ \textcolor{comment}{//std::c
      out<<"FromString: "<<str<<"::"<<str.at(it)<<"::"<<std::endl;}
00057                 \textcolor{keywordflow}{if}(str.at(it) == \textcolor{charliteral}{'B'} or str.at(it) == \textcolor{charliteral}{'b'})\{
00058                     str.erase(it);
00059                     \textcolor{keywordflow}{return} Conv::FromString<T>(str);
00060                 \}
00061                 \textcolor{keywordflow}{if}(str.at(it) == \textcolor{charliteral}{'K'} or str.at(it) == \textcolor{charliteral}{'k'})\{
00062                     str.erase(it);
00063                     \textcolor{keywordflow}{return} Conv::FromString<T>(str) * KB;
00064                 \}
00065                 \textcolor{keywordflow}{if}(str.at(it) == \textcolor{charliteral}{'M'} or str.at(it) == \textcolor{charliteral}{'m'})\{
00066                     str.erase(it);
00067                     \textcolor{keywordflow}{return} Conv::FromString<T>(str) * MB;
00068                 \}
00069                 \textcolor{keywordflow}{if}(str.at(it) == \textcolor{charliteral}{'G'} or str.at(it) == \textcolor{charliteral}{'g'})\{
00070                     str.erase(it);
00071                     \textcolor{keywordflow}{return} Conv::FromString<T>(str) * GB;
00072                 \}
00073             \}
00074             std::cerr<<\textcolor{stringliteral}{"Cannot convert unsported size unit"}<<std::endl;
00075             \textcolor{keywordflow}{return} 0;
00076         \}
00077 
00078         \textcolor{keyword}{inline} std::string TimeToString(\textcolor{keyword}{const} \textcolor{keywordtype}{double} &dTime)\{
00079             \textcolor{keywordflow}{if} ( dTime <= 0)\{
00080                 \textcolor{keywordflow}{return} \textcolor{stringliteral}{"[Failed to measure: time diffrence to small]"};
00081             \}
00082             \textcolor{keywordflow}{if} (dTime < US)\{
00083                 \textcolor{keywordflow}{return} Conv::ToString(m\_NS * dTime)+\textcolor{stringliteral}{"ns"};
00084             \}
00085             \textcolor{keywordflow}{if}(dTime < MS)\{
00086                 \textcolor{keywordflow}{return} Conv::ToString(m\_US * dTime)+\textcolor{stringliteral}{"us"};
00087             \}
00088             \textcolor{keywordflow}{if}(dTime < 1)\{
00089                 \textcolor{keywordflow}{return} Conv::ToString(m\_MS * dTime)+\textcolor{stringliteral}{"ms"};
00090             \}
00091             \textcolor{keywordflow}{return} Conv::ToString(dTime)+\textcolor{stringliteral}{"s"};
00092         \}
00093         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T> \textcolor{keyword}{inline} T TimeFromString(std::string str, \textcolor{keywordtype}{double} dMu
      lti)\{
00094             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} it = str.length()-2; it < str.length(); it++)\{ \textcolor{comment}{//std::c
      out<<"FromString: "<<str<<"::"<<str.at(it)<<"::"<<std::endl;}
00095                 \textcolor{keywordflow}{if}(str.at(it) == \textcolor{charliteral}{'N'} or str.at(it) == \textcolor{charliteral}{'n'} or str.at(it) == \textcolor{charliteral}{'U'} or
       str.at(it) == \textcolor{charliteral}{'u'} or str.at(it) == \textcolor{charliteral}{'M'} or str.at(it) == \textcolor{charliteral}{'m'} or str.at(it) == \textcolor{charliteral}{'S'
      } or str.at(it) == \textcolor{charliteral}{'s'})\{
00096                     str.erase(it);
00097                     \textcolor{keywordflow}{return} Conv::FromString<T>(str) * dMulti;
00098                 \}
00099             \}
00100             std::cerr<<\textcolor{stringliteral}{"Cannot convert unsported time unit"}<<std::endl;
00101             \textcolor{keywordflow}{return} 0;
00102         \}
00103     \}
00104 \}
00105 \textcolor{preprocessor}{#endif // MYCONV\_HPP\_INCLUDED}
\end{alltt}\end{footnotesize}
