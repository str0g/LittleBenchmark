\hypertarget{myThreadTemplates_8hpp_source}{
\section{myThreadTemplates.hpp}
}


\begin{footnotesize}\begin{alltt}
00001 \textcolor{preprocessor}{#ifndef MYTHREADTEMPLATES\_HPP\_INCLUDED}
00002 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define MYTHREADTEMPLATES\_HPP\_INCLUDED}
00003 \textcolor{preprocessor}{}
00004 \textcolor{comment}{/***************************************************************}
00005 \textcolor{comment}{ * Name:      <Input name>.cpp/h}
00006 \textcolor{comment}{ * Purpose:   Code for Application <Name>}
00007 \textcolor{comment}{ * Author:    Łukasz Buśko (buskol.waw.pl@gmail.com)}
00008 \textcolor{comment}{ * Created:   <Input date>}
00009 \textcolor{comment}{ * Copyright: Łukasz Buśko (https://str0g.wordpress.com)}
00010 \textcolor{comment}{ * License:   GNU / General Public Licens}
00011 \textcolor{comment}{ **************************************************************/}
00012 \textcolor{comment}{//Headers}
00013 \textcolor{comment}{//#include <cstdlib>}
00014 \textcolor{comment}{//#include <cstdio>}
00015 \textcolor{comment}{//#include <sys/stat.h>}
00016 \textcolor{preprocessor}{#include <iostream>}
00017 \textcolor{preprocessor}{#include <list>}
00018 \textcolor{preprocessor}{#include <string>}\textcolor{comment}{/*}
00019 \textcolor{comment}{#include <vector>*/}
00020 \textcolor{comment}{//boost}
00021 \textcolor{preprocessor}{#include <boost/thread/thread.hpp>}
00022 \textcolor{preprocessor}{#include "boost/date\_time/local\_time/local\_time.hpp"}
00023 \textcolor{preprocessor}{#include "boost/date\_time/posix\_time/posix\_time.hpp"}
00024 \textcolor{comment}{//my}
00025 \textcolor{preprocessor}{#include "myTime.hpp"}\textcolor{comment}{/*}
00026 \textcolor{comment}{#include <boost/filesystem/path.hpp>*/}
00027 \textcolor{comment}{//#include "thread\_tester\_hdd.hpp"}
00028 \textcolor{comment}{/*}
00029 \textcolor{comment}{//my}
00030 \textcolor{comment}{#include "myConv.hpp"}
00031 \textcolor{comment}{#include "myHash.hpp"}
00032 \textcolor{comment}{#include "myIO.hpp"*/}
00033 \textcolor{comment}{//Specials}
00034 \textcolor{keyword}{using} std::list;
00035 \textcolor{keyword}{using} std::string;\textcolor{comment}{/*}
00036 \textcolor{comment}{using std::vector;}
00037 \textcolor{comment}{using std::cout;}
00038 \textcolor{comment}{using std::cin;*/}
00039 \textcolor{keyword}{using} std::cerr;
00040 \textcolor{keyword}{using} std::endl;
00041 \textcolor{comment}{//Globals Varuabels}
00042 \textcolor{keyword}{namespace }myThreadTemplates\{
00043 
\hypertarget{myThreadTemplates_8hpp_source_l00045}{}\hyperlink{classmyThreadTemplates_1_1thread__1}{00045} \textcolor{keyword}{template} <\textcolor{keyword}{class} ClassT> \textcolor{keyword}{class }\hyperlink{classmyThreadTemplates_1_1thread__1}{thread_1}\{
00046         \textcolor{keyword}{private}:
00047                 ClassT *parent; 
00048                 boost::local\_time::local\_date\_time *blt\_ldt\_Creation; 
00049                 boost::local\_time::local\_date\_time *blt\_ldt\_Start; 
00050                 boost::thread m\_Thread; 
00051                 \textcolor{keyword}{static} boost::mutex mutex\_listIO; 
00052                 list<string*> *dExTimes; 
00053                 \textcolor{keywordtype}{bool} bShowOverExecution; 
00054         \textcolor{keyword}{public}:
00055                 \hyperlink{classmyThreadTemplates_1_1thread__1}{thread_1}(ClassT *parent, list<string*> *list = NULL,\textcolor{keywordtype}{bool} show = \textcolor{keyword}{f
      alse}): parent(parent),\(\backslash\)
00056                 blt\_ldt\_Creation(myTime::GetTime()),\(\backslash\)
00057                 blt\_ldt\_Start(NULL),\(\backslash\)
00058                 dExTimes(list),\(\backslash\)
00059                 bShowOverExecution(show)\{\}
\hypertarget{myThreadTemplates_8hpp_source_l00060}{}\hyperlink{classmyThreadTemplates_1_1thread__1_a40dcf528dbb18b16ed44054451a575e1}{00060}                 \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_a40dcf528dbb18b16ed44054451a575e1}{start}()\{
00061             blt\_ldt\_Start = myTime::GetTime();
00062             m\_Thread = boost::thread (boost::bind(this->\hyperlink{classmyThreadTemplates_1_1thread__1_a24e615ac4afa0d376faefd500ed47e43}{Execute_},parent));
00063         \}
\hypertarget{myThreadTemplates_8hpp_source_l00064}{}\hyperlink{classmyThreadTemplates_1_1thread__1_aaa171242d5355f2a472a566d30863894}{00064}                 \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_aaa171242d5355f2a472a566d30863894}{start_self_test}()\{
00065             blt\_ldt\_Start(myTime::GetTime());
00066             m\_Thread = boost::thread (\hyperlink{classmyThreadTemplates_1_1thread__1_add97f72749590d4023fd23fcd0a3dece}{self_test});
00067         \}
\hypertarget{myThreadTemplates_8hpp_source_l00068}{}\hyperlink{classmyThreadTemplates_1_1thread__1_add97f72749590d4023fd23fcd0a3dece}{00068}                 \textcolor{keyword}{static} \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_add97f72749590d4023fd23fcd0a3dece}{self_test}()\{
00069             \textcolor{comment}{//test code hear}
00070         \}
\hypertarget{myThreadTemplates_8hpp_source_l00071}{}\hyperlink{classmyThreadTemplates_1_1thread__1_a24e615ac4afa0d376faefd500ed47e43}{00071}         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_a24e615ac4afa0d376faefd500ed47e43}{Execute_}(ClassT *p)\{
00072             p->Execute();
00073         \}
\hypertarget{myThreadTemplates_8hpp_source_l00074}{}\hyperlink{classmyThreadTemplates_1_1thread__1_ae393ee33ecbfee158a03a4c0f21cf95c}{00074}                 \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_ae393ee33ecbfee158a03a4c0f21cf95c}{join}()\{
00075             m\_Thread.join();
00076                     \hyperlink{classmyThreadTemplates_1_1thread__1_a2cd2286a9d51537395123832a6a25ebc}{UpdateStats}(\textcolor{keyword}{new} \textcolor{keywordtype}{string}(\textcolor{stringliteral}{"Thread has been doing something for: 
      "}+ myConv::TimeToString(myTime::TimeDiff(blt\_ldt\_Start))));
00077         \}
\hypertarget{myThreadTemplates_8hpp_source_l00078}{}\hyperlink{classmyThreadTemplates_1_1thread__1_a9a0372afc5bd30783dde8fed70df908c}{00078}                 \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_a9a0372afc5bd30783dde8fed70df908c}{join}(\textcolor{keywordtype}{unsigned} val)\{
00079             m\_Thread.timed\_join(( boost::posix\_time::time\_duration(0,0,val,\textcolor{keywordtype}{int}(bo
      ost::posix\_time::time\_duration::ticks\_per\_second() / 10))));
00080             \hyperlink{classmyThreadTemplates_1_1thread__1_a2cd2286a9d51537395123832a6a25ebc}{UpdateStats}(\textcolor{keyword}{new} \textcolor{keywordtype}{string}(\textcolor{stringliteral}{"Thread has been doing something for: "}+ myCon
      v::TimeToString(myTime::TimeDiff(blt\_ldt\_Start))));
00081         \}
00082         \textcolor{keywordtype}{string} GetThreadID()\{
00083             \textcolor{keywordflow}{return} myConv::ToString(m\_Thread.get\_id());
00084         \}
\hypertarget{myThreadTemplates_8hpp_source_l00085}{}\hyperlink{classmyThreadTemplates_1_1thread__1_a2cd2286a9d51537395123832a6a25ebc}{00085}         \textcolor{keywordtype}{void} \hyperlink{classmyThreadTemplates_1_1thread__1_a2cd2286a9d51537395123832a6a25ebc}{UpdateStats}(\textcolor{keywordtype}{string} *str)\{
00086             boost::mutex::scoped\_lock(mutex\_listIO);
00087             \textcolor{keywordflow}{if} (dExTimes)
00088                 dExTimes->push\_back(str);
00089             \textcolor{keywordflow}{else}
00090                 \textcolor{keyword}{delete} str;
00091         \}
\hypertarget{myThreadTemplates_8hpp_source_l00092}{}\hyperlink{classmyThreadTemplates_1_1thread__1_aab0cedc80707090ec300be40e68c19c1}{00092}         \textcolor{keyword}{virtual} \hyperlink{classmyThreadTemplates_1_1thread__1_aab0cedc80707090ec300be40e68c19c1}{~thread_1}()\{
00093                     \textcolor{keywordflow}{if} (bShowOverExecution)
00094                 cerr<<(\textcolor{stringliteral}{"Thread has been executed for: "}+ myConv::TimeToString(myT
      ime::TimeDiff(blt\_ldt\_Creation)))<<endl;
00095             \textcolor{keywordflow}{if} ( blt\_ldt\_Creation ) \{ \textcolor{keyword}{delete} blt\_ldt\_Creation; \}
00096             \textcolor{keywordflow}{if} ( blt\_ldt\_Start ) \{ \textcolor{keyword}{delete} blt\_ldt\_Start; \}
00097         \}
00098 \};
00099 
00100 \}
00101 
00102 \textcolor{preprocessor}{#endif // MYTHREADTEMPLATES\_HPP\_INCLUDED}
\end{alltt}\end{footnotesize}
