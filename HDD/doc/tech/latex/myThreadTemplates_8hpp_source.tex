\hypertarget{myThreadTemplates_8hpp_source}{
\section{myThreadTemplates.hpp}
}


\begin{footnotesize}\begin{alltt}
00001 \textcolor{preprocessor}{#ifndef MYTHREADTEMPLATES\_HPP\_INCLUDED}
00002 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define MYTHREADTEMPLATES\_HPP\_INCLUDED}
00003 \textcolor{preprocessor}{}
00004 \textcolor{comment}{/***************************************************************}
00005 \textcolor{comment}{ * Name:      <Input name>.cpp/h}
00006 \textcolor{comment}{ * Purpose:   Code for Application <Name>}
00007 \textcolor{comment}{ * Author:    Łukasz Buśko (buskol.waw.pl@gmail.com)}
00008 \textcolor{comment}{ * Created:   <Input date>}
00009 \textcolor{comment}{ * Copyright: Łukasz Buśko (https://str0g.wordpress.com)}
00010 \textcolor{comment}{ * License:   GNU / General Public Licens}
00011 \textcolor{comment}{ **************************************************************/}
00012 \textcolor{comment}{//Headers}
00013 \textcolor{comment}{//#include <cstdlib>}
00014 \textcolor{comment}{//#include <cstdio>}
00015 \textcolor{comment}{//#include <sys/stat.h>}
00016 \textcolor{preprocessor}{#include <iostream>}
00017 \textcolor{preprocessor}{#include <list>}
00018 \textcolor{preprocessor}{#include <string>}\textcolor{comment}{/*}
00019 \textcolor{comment}{#include <vector>*/}
00020 \textcolor{comment}{//boost}
00021 \textcolor{preprocessor}{#include <boost/thread/thread.hpp>}
00022 \textcolor{preprocessor}{#include "boost/date\_time/local\_time/local\_time.hpp"}
00023 \textcolor{preprocessor}{#include "boost/date\_time/posix\_time/posix\_time.hpp"}
00024 \textcolor{comment}{//my}
00025 \textcolor{preprocessor}{#include "myTime.hpp"}
00026 \textcolor{preprocessor}{#include "myConv.hpp"}\textcolor{comment}{/*}
00027 \textcolor{comment}{#include <boost/filesystem/path.hpp>*/}
00028 \textcolor{comment}{//#include "thread\_tester\_hdd.hpp"}
00029 
00030 \textcolor{comment}{//my}
00031 \textcolor{comment}{/*}
00032 \textcolor{comment}{#include "myHash.hpp"}
00033 \textcolor{comment}{#include "myIO.hpp"*/}
00034 \textcolor{comment}{//Specials}
00035 \textcolor{keyword}{using} std::list;
00036 \textcolor{keyword}{using} std::string;\textcolor{comment}{/*}
00037 \textcolor{comment}{using std::vector;}
00038 \textcolor{comment}{using std::cout;}
00039 \textcolor{comment}{using std::cin;*/}
00040 \textcolor{keyword}{using} std::cerr;
00041 \textcolor{keyword}{using} std::endl;
00042 \textcolor{comment}{//Globals Varuabels}
00043 
00044 \textcolor{keyword}{namespace }buskol\{
00045     \textcolor{keyword}{namespace }ThreadTemplates\{
00050 
\hypertarget{myThreadTemplates_8hpp_source_l00051}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1}{00051}     \textcolor{keyword}{template} <\textcolor{keyword}{class} ClassT> \textcolor{keyword}{class }\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1}{thread_1}\{
00052         \textcolor{keyword}{private}:
00053             ClassT *parent; 
00054             boost::local\_time::local\_date\_time *blt\_ldt\_Creation; 
00055             boost::local\_time::local\_date\_time *blt\_ldt\_Start; 
00056             boost::thread m\_Thread; 
00057             \textcolor{keyword}{static} boost::mutex mutex\_listIO; 
00058             list<string*> *dExTimes; 
00059             \textcolor{keywordtype}{bool} bShowOverExecution; 
00060         \textcolor{keyword}{public}:
00061             \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1}{thread_1}(ClassT *parent, list<string*> *list = NULL,\textcolor{keywordtype}{bool} show = \textcolor{keyword}{false
      }): parent(parent),\(\backslash\)
00062                 blt\_ldt\_Creation(\hyperlink{group__libbuskol_ga6302b620351164dda28cc6d9d1b81aa5}{Time::GetTime}()),\(\backslash\)
00063                 blt\_ldt\_Start(NULL),\(\backslash\)
00064                 dExTimes(list),\(\backslash\)
00065                 bShowOverExecution(show)\{\}
\hypertarget{myThreadTemplates_8hpp_source_l00066}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a71250f676aa96d06d5b693b685af7555}{00066}             \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a71250f676aa96d06d5b693b685af7555}{start}()\{
00067                 blt\_ldt\_Start = \hyperlink{group__libbuskol_ga6302b620351164dda28cc6d9d1b81aa5}{Time::GetTime}();
00068                 m\_Thread = boost::thread (boost::bind(this->\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a37cde0d5c6105d9194ce1cf981cf9c5a}{Execute_},parent));
00069             \}
\hypertarget{myThreadTemplates_8hpp_source_l00070}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ad3a839cb3ec07abf8cf54fe81fd5e7f3}{00070}             \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ad3a839cb3ec07abf8cf54fe81fd5e7f3}{start_self_test}()\{
00071                 blt\_ldt\_Start(\hyperlink{group__libbuskol_ga6302b620351164dda28cc6d9d1b81aa5}{Time::GetTime}());
00072                 m\_Thread = boost::thread (\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ac33a5aa33679452b203c539401c92929}{self_test});
00073             \}
\hypertarget{myThreadTemplates_8hpp_source_l00074}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ac33a5aa33679452b203c539401c92929}{00074}             \textcolor{keyword}{static} \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ac33a5aa33679452b203c539401c92929}{self_test}()\{
00075                 \textcolor{comment}{//test code hear}
00076             \}
\hypertarget{myThreadTemplates_8hpp_source_l00077}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a37cde0d5c6105d9194ce1cf981cf9c5a}{00077}             \textcolor{keyword}{static} \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a37cde0d5c6105d9194ce1cf981cf9c5a}{Execute_}(ClassT *p)\{
00078                 p->Execute();
00079             \}
\hypertarget{myThreadTemplates_8hpp_source_l00080}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_af917523b30feb06614e96371a5c198ed}{00080}             \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_af917523b30feb06614e96371a5c198ed}{join}()\{
00081                 m\_Thread.join();
00082                 \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ab97928f6c8b8c75b33ffd6e57514d692}{UpdateStats}(\textcolor{keyword}{new} \textcolor{keywordtype}{string}(\textcolor{stringliteral}{"Thread has been doing something for: "}+ 
      \hyperlink{group__libbuskol_ga6c72f99eb28381403eb06abee5ea7c44}{Conv::TimeToString}(\hyperlink{group__libbuskol_gac6d1980cc97a5c78f36a3fd96ceaa573}{Time::TimeDiff}(*blt\_ldt\_Start))));
00083             \}
\hypertarget{myThreadTemplates_8hpp_source_l00084}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a7c62551333aad740fc7b48742cdeb877}{00084}             \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a7c62551333aad740fc7b48742cdeb877}{join}(\textcolor{keywordtype}{unsigned} val)\{
00085                 m\_Thread.timed\_join(( boost::posix\_time::time\_duration(0,0,val,\textcolor{keywordtype}{in
      t}(boost::posix\_time::time\_duration::ticks\_per\_second() / 10))));
00086                 \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ab97928f6c8b8c75b33ffd6e57514d692}{UpdateStats}(\textcolor{keyword}{new} \textcolor{keywordtype}{string}(\textcolor{stringliteral}{"Thread has been doing something for: "}+ 
      \hyperlink{group__libbuskol_ga6c72f99eb28381403eb06abee5ea7c44}{Conv::TimeToString}(\hyperlink{group__libbuskol_gac6d1980cc97a5c78f36a3fd96ceaa573}{Time::TimeDiff}(*blt\_ldt\_Start))));
00087             \}
00088             \textcolor{keywordtype}{string} GetThreadID()\{
00089                 \textcolor{keywordflow}{return} \hyperlink{group__libbuskol_ga0b261d6de4c26434d56ba40d00daa68a}{Conv::ToString}(m\_Thread.get\_id());
00090             \}
\hypertarget{myThreadTemplates_8hpp_source_l00091}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ab97928f6c8b8c75b33ffd6e57514d692}{00091}             \textcolor{keywordtype}{void} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_ab97928f6c8b8c75b33ffd6e57514d692}{UpdateStats}(\textcolor{keywordtype}{string} *str)\{
00092                 boost::mutex::scoped\_lock(mutex\_listIO);
00093                 \textcolor{keywordflow}{if} (dExTimes)
00094                     dExTimes->push\_back(str);
00095                 \textcolor{keywordflow}{else}
00096                     \textcolor{keyword}{delete} str;
00097             \}
\hypertarget{myThreadTemplates_8hpp_source_l00098}{}\hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a7e53c5d7bef0898efc1c1bb217c6319a}{00098}             \textcolor{keyword}{virtual} \hyperlink{classbuskol_1_1ThreadTemplates_1_1thread__1_a7e53c5d7bef0898efc1c1bb217c6319a}{~thread_1}()\{
00099                 \textcolor{keywordflow}{if} (bShowOverExecution)
00100                     cerr<<(\textcolor{stringliteral}{"Thread has been executed for: "}+ \hyperlink{group__libbuskol_ga6c72f99eb28381403eb06abee5ea7c44}{Conv::TimeToString}(
      \hyperlink{group__libbuskol_gac6d1980cc97a5c78f36a3fd96ceaa573}{Time::TimeDiff}(*blt\_ldt\_Creation)))<<endl;
00101                 \textcolor{keywordflow}{if} ( blt\_ldt\_Creation ) \{ \textcolor{keyword}{delete} blt\_ldt\_Creation; \}
00102                 \textcolor{keywordflow}{if} ( blt\_ldt\_Start ) \{ \textcolor{keyword}{delete} blt\_ldt\_Start; \}
00103             \}
00104         \};
00106     \}
00107 
00108 \}
00109 
00110 \textcolor{preprocessor}{#endif // MYTHREADTEMPLATES\_HPP\_INCLUDED}
\end{alltt}\end{footnotesize}
